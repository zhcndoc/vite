import{_ as r,b as d,o as a,i as k,j as s,S as t,g as o,R as p,w as l}from"./chunks/framework.Caqowgrb.js";const K=JSON.parse('{"title":"依赖优化选项","description":"","frontmatter":{},"headers":[],"relativePath":"config/dep-optimization-options.md","filePath":"config/dep-optimization-options.md"}'),h={name:"config/dep-optimization-options.md"},u={id:"optimizedeps-entries",tabindex:"-1"},g={id:"optimizedeps-exclude",tabindex:"-1"},E={class:"warning custom-block"},m={class:"language-js"},y={class:"shiki shiki-themes github-light github-dark twoslash lsp",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},f={class:"line"},b={style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},D={class:"line"},w={style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},C={class:"line"},v={style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},z={id:"optimizedeps-include",tabindex:"-1"},F={class:"language-js"},T={class:"shiki shiki-themes github-light github-dark twoslash lsp",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},A={class:"line"},S={style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},B={class:"line"},x={style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},P={class:"line"},O={style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},V={id:"optimizedeps-rolldownoptions",tabindex:"-1"},I={id:"optimizedeps-esbuildoptions",tabindex:"-1"},j={id:"optimizedeps-force",tabindex:"-1"},N={id:"optimizedeps-nodiscovery",tabindex:"-1"},R={id:"optimizedeps-holduntilcrawlend",tabindex:"-1"},U={id:"optimizedeps-disabled",tabindex:"-1"},J={id:"optimizedeps-needsinterop",tabindex:"-1"};function $(M,i,G,L,W,q){const e=d("NonInheritBadge"),n=d("v-menu");return a(),k("div",null,[i[80]||(i[80]=s("h1",{id:"dep-optimization-options",tabindex:"-1"},[t("依赖优化选项 "),s("a",{class:"header-anchor",href:"#dep-optimization-options","aria-label":"Permalink to “依赖优化选项”"},"​")],-1)),i[81]||(i[81]=s("ul",null,[s("li",null,[s("strong",null,"相关内容："),t(),s("a",{href:"/guide/dep-pre-bundling"},"依赖预构建")])],-1)),i[82]||(i[82]=s("p",null,"除非另有说明，本节中的选项仅适用于依赖优化器，该优化器仅在开发环境中使用。",-1)),s("h2",u,[i[0]||(i[0]=t("optimizeDeps.entries ",-1)),o(e),i[1]||(i[1]=t()),i[2]||(i[2]=s("a",{class:"header-anchor",href:"#optimizedeps-entries","aria-label":"Permalink to “optimizeDeps.entries”"},"​",-1))]),i[83]||(i[83]=p('<ul><li><strong>类型：</strong> <code>string | string[]</code></li></ul><p>默认情况下，Vite 会抓取你的 <code>index.html</code> 来检测需要预构建的依赖项（忽略了<code>node_modules</code>、<code>build.outDir</code>、<code>__tests__</code> 和 <code>coverage</code>）。如果指定了 <code>build.rollupOptions.input</code>，Vite 将转而去抓取这些入口点。</p><p>如果这两者都不合你意，则可以使用此选项指定自定义条目——该值需要遵循 <a href="https://superchupu.dev/tinyglobby/comparison" target="_blank" rel="noreferrer">tinyglobby 模式</a> ，或者是相对于 Vite 项目根目录的匹配模式数组。当显式声明了 <code>optimizeDeps.entries</code> 时默认只有 <code>node_modules</code> 和 <code>build.outDir</code> 文件夹会被忽略。如果还需忽略其他文件夹，你可以在模式列表中使用以 <code>!</code> 为前缀的、用来匹配忽略项的模式。对于明确包含字符串 <code>node_modules</code> 的模式，不会忽略 <code>node_modules</code>。</p>',3)),s("h2",g,[i[3]||(i[3]=t("optimizeDeps.exclude ",-1)),o(e),i[4]||(i[4]=t()),i[5]||(i[5]=s("a",{class:"header-anchor",href:"#optimizedeps-exclude","aria-label":"Permalink to “optimizeDeps.exclude”"},"​",-1))]),i[84]||(i[84]=s("ul",null,[s("li",null,[s("strong",null,"类型："),t(),s("code",null,"string[]")])],-1)),i[85]||(i[85]=s("p",null,"在预构建中强制排除的依赖项。",-1)),s("div",E,[i[30]||(i[30]=s("p",{class:"custom-block-title"},"CommonJS",-1)),i[31]||(i[31]=s("p",null,[t("CommonJS 的依赖不应该排除在优化外。如果一个 ESM 依赖被排除在优化外，但是却有一个嵌套的 CommonJS 依赖，则应该为该 CommonJS 依赖添加 "),s("code",null,"optimizeDeps.include"),t("。例如：")],-1)),s("div",m,[i[28]||(i[28]=s("button",{title:"Copy Code",class:"copy"},null,-1)),i[29]||(i[29]=s("span",{class:"lang"},"js",-1)),s("pre",y,[s("code",null,[s("span",f,[i[8]||(i[8]=s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"export",-1)),i[9]||(i[9]=s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," default",-1)),i[10]||(i[10]=s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ",-1)),s("span",b,[o(n,{class:"twoslash-hover","popper-class":"shiki twoslash-floating vp-copy-ignore",theme:"twoslash"},{popper:l(({})=>[...i[6]||(i[6]=[s("span",{class:"twoslash-popup-container vp-copy-ignore"},[s("code",{class:"twoslash-popup-code"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"function"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defineConfig"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"config"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UserConfig"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UserConfig"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (+"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," overloads"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s("div",{class:"twoslash-popup-docs vp-doc"},[s("p",null,`Type helper to make it easier to use vite.config.ts
accepts a direct`),t(`
`),s("p",null,"UserConfig"),t(`
`),s("p",null,`object, or a function that returns it.
The function receives a`),t(`
`),s("p",null,"ConfigEnv"),t(`
`),s("p",null,"object.")])],-1)])]),default:l(()=>[i[7]||(i[7]=s("span",null,"defineConfig",-1))]),_:1})]),i[11]||(i[11]=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"({",-1))]),i[22]||(i[22]=t(`
`,-1)),s("span",D,[i[14]||(i[14]=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ",-1)),s("span",w,[o(n,{class:"twoslash-hover","popper-class":"shiki twoslash-floating vp-copy-ignore",theme:"twoslash"},{popper:l(({})=>[...i[12]||(i[12]=[s("span",{class:"twoslash-popup-container vp-copy-ignore"},[s("code",{class:"twoslash-popup-code"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"UserConfig.optimizeDeps"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"?:"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DepOptimizationOptions "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," undefined")]),s("div",{class:"twoslash-popup-docs vp-doc"},[s("p",null,"Dep optimization options")])],-1)])]),default:l(()=>[i[13]||(i[13]=s("span",null,"optimizeDeps",-1))]),_:1})]),i[15]||(i[15]=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": {",-1))]),i[23]||(i[23]=t(`
`,-1)),s("span",C,[i[18]||(i[18]=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ",-1)),s("span",v,[o(n,{class:"twoslash-hover","popper-class":"shiki twoslash-floating vp-copy-ignore",theme:"twoslash"},{popper:l(({})=>[...i[16]||(i[16]=[s("span",{class:"twoslash-popup-container vp-copy-ignore"},[s("code",{class:"twoslash-popup-code"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DepOptimizationConfig.include"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"?:"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," string[] "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," undefined")]),s("div",{class:"twoslash-popup-docs vp-doc"},[s("p",null,`Force optimize listed dependencies (must be resolvable import paths,
cannot be globs).`)])],-1)])]),default:l(()=>[i[17]||(i[17]=s("span",null,"include",-1))]),_:1})]),i[19]||(i[19]=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": [",-1)),i[20]||(i[20]=s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'esm-dep > cjs-dep'",-1)),i[21]||(i[21]=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"],",-1))]),i[24]||(i[24]=t(`
`,-1)),i[25]||(i[25]=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  },")],-1)),i[26]||(i[26]=t(`
`,-1)),i[27]||(i[27]=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")],-1))])])])]),s("h2",z,[i[32]||(i[32]=t("optimizeDeps.include ",-1)),o(e),i[33]||(i[33]=t()),i[34]||(i[34]=s("a",{class:"header-anchor",href:"#optimizedeps-include","aria-label":"Permalink to “optimizeDeps.include”"},"​",-1))]),i[86]||(i[86]=s("ul",null,[s("li",null,[s("strong",null,"类型："),t(),s("code",null,"string[]")])],-1)),i[87]||(i[87]=s("p",null,[t("默认情况下，不在 "),s("code",null,"node_modules"),t(" 中的，链接的包不会被预构建。使用此选项可强制预构建链接的包。")],-1)),i[88]||(i[88]=s("p",null,[s("strong",null,"实验性："),t(" 如果你使用的是一个有很多深层导入的库，你也可以指定一个尾部的 glob 模式来一次性地预构建所有深层导入。这将避免在使用新的深层导入时不断地预构建。可以在此 "),s("a",{href:"https://github.com/vitejs/vite/discussions/15833",target:"_blank",rel:"noreferrer"},"提供反馈"),t("。例如：")],-1)),s("div",F,[i[57]||(i[57]=s("button",{title:"Copy Code",class:"copy"},null,-1)),i[58]||(i[58]=s("span",{class:"lang"},"js",-1)),s("pre",T,[s("code",null,[s("span",A,[i[37]||(i[37]=s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"export",-1)),i[38]||(i[38]=s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," default",-1)),i[39]||(i[39]=s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ",-1)),s("span",S,[o(n,{class:"twoslash-hover","popper-class":"shiki twoslash-floating vp-copy-ignore",theme:"twoslash"},{popper:l(({})=>[...i[35]||(i[35]=[s("span",{class:"twoslash-popup-container vp-copy-ignore"},[s("code",{class:"twoslash-popup-code"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"function"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defineConfig"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"config"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UserConfig"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UserConfig"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (+"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," overloads"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s("div",{class:"twoslash-popup-docs vp-doc"},[s("p",null,`Type helper to make it easier to use vite.config.ts
accepts a direct`),t(`
`),s("p",null,"UserConfig"),t(`
`),s("p",null,`object, or a function that returns it.
The function receives a`),t(`
`),s("p",null,"ConfigEnv"),t(`
`),s("p",null,"object.")])],-1)])]),default:l(()=>[i[36]||(i[36]=s("span",null,"defineConfig",-1))]),_:1})]),i[40]||(i[40]=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"({",-1))]),i[51]||(i[51]=t(`
`,-1)),s("span",B,[i[43]||(i[43]=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ",-1)),s("span",x,[o(n,{class:"twoslash-hover","popper-class":"shiki twoslash-floating vp-copy-ignore",theme:"twoslash"},{popper:l(({})=>[...i[41]||(i[41]=[s("span",{class:"twoslash-popup-container vp-copy-ignore"},[s("code",{class:"twoslash-popup-code"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"UserConfig.optimizeDeps"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"?:"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DepOptimizationOptions "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," undefined")]),s("div",{class:"twoslash-popup-docs vp-doc"},[s("p",null,"Dep optimization options")])],-1)])]),default:l(()=>[i[42]||(i[42]=s("span",null,"optimizeDeps",-1))]),_:1})]),i[44]||(i[44]=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": {",-1))]),i[52]||(i[52]=t(`
`,-1)),s("span",P,[i[47]||(i[47]=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ",-1)),s("span",O,[o(n,{class:"twoslash-hover","popper-class":"shiki twoslash-floating vp-copy-ignore",theme:"twoslash"},{popper:l(({})=>[...i[45]||(i[45]=[s("span",{class:"twoslash-popup-container vp-copy-ignore"},[s("code",{class:"twoslash-popup-code"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DepOptimizationConfig.include"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"?:"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," string[] "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," undefined")]),s("div",{class:"twoslash-popup-docs vp-doc"},[s("p",null,`Force optimize listed dependencies (must be resolvable import paths,
cannot be globs).`)])],-1)])]),default:l(()=>[i[46]||(i[46]=s("span",null,"include",-1))]),_:1})]),i[48]||(i[48]=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": [",-1)),i[49]||(i[49]=s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'my-lib/components/**/*.vue'",-1)),i[50]||(i[50]=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"],",-1))]),i[53]||(i[53]=t(`
`,-1)),i[54]||(i[54]=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  },")],-1)),i[55]||(i[55]=t(`
`,-1)),i[56]||(i[56]=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")],-1))])])]),s("h2",V,[i[59]||(i[59]=t("optimizeDeps.rolldownOptions ",-1)),o(e),i[60]||(i[60]=t()),i[61]||(i[61]=s("a",{class:"header-anchor",href:"#optimizedeps-rolldownoptions","aria-label":"Permalink to “optimizeDeps.rolldownOptions”"},"​",-1))]),i[89]||(i[89]=p('<ul><li><strong>类型：</strong> <a href="https://www.typescriptlang.org/docs/handbook/utility-types.html#omittype-keys" target="_blank" rel="noreferrer"><code>Omit</code></a><code>&lt;</code><a href="https://rolldown.rs/reference/" target="_blank" rel="noreferrer"><code>RolldownOptions</code></a>, <code>&#39;input&#39; | &#39;logLevel&#39; | &#39;output&#39;&gt; &amp; { output?: [</code>Omit<code>](https://www.typescriptlang.org/docs/handbook/utility-types.html#omittype-keys)</code>&lt;<code> [</code>RolldownOutputOptions<code>](https://rolldown.rs/reference/), </code>&#39;format&#39; | &#39;sourcemap&#39; | &#39;dir&#39; | &#39;banner&#39;&gt;<code></code>}`</li></ul><p>在依赖扫描和优化过程中传递给 Rolldown 的选项。</p><p>某些选项进行了省略，因为修改它们与 Vite 的优化方案并不兼容。</p><ul><li><code>plugins</code> 与 Vite 的 dep 插件合并</li></ul>',4)),s("h2",I,[i[62]||(i[62]=t("optimizeDeps.esbuildOptions ",-1)),o(e),i[63]||(i[63]=t()),i[64]||(i[64]=s("a",{class:"header-anchor",href:"#optimizedeps-esbuildoptions","aria-label":"Permalink to “optimizeDeps.esbuildOptions”"},"​",-1))]),i[90]||(i[90]=p('<ul><li><strong>类型：</strong> <a href="https://www.typescriptlang.org/docs/handbook/utility-types.html#omittype-keys" target="_blank" rel="noreferrer"><code>Omit</code></a><code>&lt;</code><a href="https://esbuild.github.io/api/#general-options" target="_blank" rel="noreferrer"><code>EsbuildBuildOptions</code></a><code>, | &#39;bundle&#39; | &#39;entryPoints&#39; | &#39;external&#39; | &#39;write&#39; | &#39;watch&#39; | &#39;outdir&#39; | &#39;outfile&#39; | &#39;outbase&#39; | &#39;outExtension&#39; | &#39;metafile&#39;&gt;</code></li><li><strong>已弃用</strong></li></ul><p>此选项在内部被转换为 <code>optimizeDeps.rolldownOptions</code>。请使用 <code>optimizeDeps.rolldownOptions</code> 代替。</p>',2)),s("h2",j,[i[65]||(i[65]=t("optimizeDeps.force ",-1)),o(e),i[66]||(i[66]=t()),i[67]||(i[67]=s("a",{class:"header-anchor",href:"#optimizedeps-force","aria-label":"Permalink to “optimizeDeps.force”"},"​",-1))]),i[91]||(i[91]=s("ul",null,[s("li",null,[s("strong",null,"类型："),t(),s("code",null,"boolean")])],-1)),i[92]||(i[92]=s("p",null,[t("设置为 "),s("code",null,"true"),t(" 可以强制依赖预构建，而忽略之前已经缓存过的、已经优化过的依赖。")],-1)),s("h2",N,[i[68]||(i[68]=t("optimizeDeps.noDiscovery ",-1)),o(e),i[69]||(i[69]=t()),i[70]||(i[70]=s("a",{class:"header-anchor",href:"#optimizedeps-nodiscovery","aria-label":"Permalink to “optimizeDeps.noDiscovery”"},"​",-1))]),i[93]||(i[93]=p("<ul><li><strong>类型：</strong> <code>boolean</code></li><li><strong>默认：</strong> <code>false</code></li></ul><p>设置为 true 时，自动依赖项发现将被禁用，并且仅优化 <code>optimizeDeps.include</code> 中列出的依赖项。在开发过程中，仅 CJS 依赖项必须存在于 <code>optimizeDeps.include</code> 中。</p>",2)),s("h2",R,[i[71]||(i[71]=t("optimizeDeps.holdUntilCrawlEnd ",-1)),o(e),i[72]||(i[72]=t()),i[73]||(i[73]=s("a",{class:"header-anchor",href:"#optimizedeps-holduntilcrawlend","aria-label":"Permalink to “optimizeDeps.holdUntilCrawlEnd”"},"​",-1))]),i[94]||(i[94]=p('<ul><li><strong>实验性：</strong> <a href="https://github.com/vitejs/vite/discussions/15834" target="_blank" rel="noreferrer">提供反馈</a></li><li><strong>类型：</strong> <code>boolean</code></li><li><strong>默认：</strong> <code>true</code></li></ul><p>当该功能被启用时，系统会在冷启动时保持第一个优化的依赖结果，直到所有的静态导入都被检索完毕。这样可以避免因为发现新的依赖项而触发新的公共 chunk 生成，从而需要刷新整个页面。如果通过扫描和在 <code>include</code> 中明确定义的方式能找到所有的依赖项，那么最好关闭这个功能，这样浏览器可以并行处理更多的请求。</p>',2)),s("h2",U,[i[74]||(i[74]=t("optimizeDeps.disabled ",-1)),o(e),i[75]||(i[75]=t()),i[76]||(i[76]=s("a",{class:"header-anchor",href:"#optimizedeps-disabled","aria-label":"Permalink to “optimizeDeps.disabled”"},"​",-1))]),i[95]||(i[95]=p('<ul><li><strong>已废弃</strong></li><li><strong>实验性：</strong> <a href="https://github.com/vitejs/vite/discussions/13839" target="_blank" rel="noreferrer">提供反馈</a></li><li><strong>类型：</strong> <code>boolean | &#39;build&#39; | &#39;dev&#39;</code></li><li><strong>默认：</strong> <code>&#39;build&#39;</code></li></ul><p>此选项已被弃用。从 Vite 5.1 版本开始，构建过程中对依赖项的预打包已经被移除。将 <code>optimizeDeps.disabled</code> 设置为 <code>true</code> 或 <code>&#39;dev&#39;</code> 将会禁用优化器，配置为 <code>false</code> 或 <code>&#39;build&#39;</code> 将会在开发模式下启用优化器。</p><p>如果你想完全禁用优化器，可以设置 <code>optimizeDeps.noDiscovery: true</code> 来禁止自动发现依赖项，并保持 <code>optimizeDeps.include</code> 未定义或为空。</p><div class="warning custom-block"><p class="custom-block-title custom-block-title-default">WARNING</p><p>在构建过程中优化依赖项是一个 <strong>实验性</strong> 的功能。尝试这种策略的项目也会使用 <code>build.commonjsOptions: { include: [] }</code> 来移除 <code>@rollup/plugin-commonjs</code>。如果你这样做，将会有一个警告提示你在打包时需要重新启用它，以支持仅使用 CJS 的包。</p></div>',4)),s("h2",J,[i[77]||(i[77]=t("optimizeDeps.needsInterop ",-1)),o(e),i[78]||(i[78]=t()),i[79]||(i[79]=s("a",{class:"header-anchor",href:"#optimizedeps-needsinterop","aria-label":"Permalink to “optimizeDeps.needsInterop”"},"​",-1))]),i[96]||(i[96]=s("ul",null,[s("li",null,[s("strong",null,"实验性")]),s("li",null,[s("strong",null,"类型:"),t(),s("code",null,"string[]")])],-1)),i[97]||(i[97]=s("p",null,[t("当导入这些依赖项时，会强制 ESM 转换。Vite 能够正确检测到依赖项是否需要转换处理（interop），因此通常不需要使用此选项。然而，不同的依赖项组合可能导致其中一些包以不同方式预构建。将这些包添加到 "),s("code",null,"needsInterop"),t(" 中可以通过避免重新加载整个页面来加快冷启动速度。如果某个依赖项符合此情况，Vite 将抛出警告，建议你在配置中添加该包名。")],-1))])}const Q=r(h,[["render",$]]);export{K as __pageData,Q as default};
